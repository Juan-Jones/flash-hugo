{{ $.Scratch.Add "index" slice }}
{{ range site.RegularPages }}
  {{ $date := time.Format ":date_long" .PublishDate }}
  {{ $image := "" }} <!-- Default empty value for image -->

  {{ with .Params.image }}
    {{ if (fileExists (add `assets/` .)) }}
      {{ $resizedImage := (resources.Get .).Resize "650x" }}
      {{ $image = $resizedImage.Permalink }}
    {{ end }}
  {{ end }}

  {{ $.Scratch.Add "index" (dict 
    "title" .Title
    "date" $date
    "image" $image
    "categories" .Params.categories
    "contents" .Plain
    "permalink" .RelPermalink
  ) }}
{{ end }}

{{ $.Scratch.Get "index" | jsonify }}

